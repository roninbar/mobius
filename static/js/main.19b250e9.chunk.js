(this.webpackJsonpmobius=this.webpackJsonpmobius||[]).push([[0],{16:function(r,t,e){r.exports=e(23)},21:function(r,t,e){},22:function(r,t,e){},23:function(r,t,e){"use strict";e.r(t);var o,a,n,i,u=e(0),c=e.n(u),l=e(6),s=e.n(l),f=e(2),m=e(7),h=e(4),v=e(1),p=(e(21),String.raw),M=[[0,0,1],[0,1,0],[1,1,0],[1,0,0]];function d(){var r=Object(u.useState)(0),t=Object(h.a)(r,2),e=t[0],l=t[1],s=Object(u.useState)(),m=Object(h.a)(s,2),M=m[0],d=m[1],T=Object(u.useState)(v.a.create()),L=Object(h.a)(T,2),w=L[0],_=L[1],y=Object(u.useRef)(null),I=Object(u.useRef)(null),F=Object(u.useRef)(null);Object(u.useEffect)((function(){var r,t=null===(r=F.current)||void 0===r?void 0:r.getContext("webgl");if(!t)throw new Error("Failed to get a WebGL context.");y.current=function(r){var t=p(n||(n=Object(f.a)(["\n    // Attributes\n    attribute vec4 ",";\n    attribute vec4 ",";\n    attribute vec2 ",";\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Program\n    void main(void) {\n      gl_Position = "," * "," * "," * ",";\n      "," = ",";\n      "," = ",";\n    }\n  "])),"aPosition","aColor","aTextureCoords","uModelMatrix","uViewMatrix","uProjectionMatrix","vColor","vTextureCoords","uProjectionMatrix","uViewMatrix","uModelMatrix","aPosition","vColor","aColor","vTextureCoords","aTextureCoords"),e=p(i||(i=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Uniforms\n    uniform sampler2D ",";\n    // Program\n    void main(void) {\n      gl_FragColor = "," * texture2D(",", ",");\n    }\n  "])),"vColor","vTextureCoords","uSampler","vColor","uSampler","vTextureCoords"),o=b(r,t,e);return{program:o,attribs:{position:r.getAttribLocation(o,"aPosition"),color:r.getAttribLocation(o,"aColor"),textureCoords:r.getAttribLocation(o,"aTextureCoords")},uniforms:{sampler:C(r,o,"uSampler"),modelMatrix:C(r,o,"uModelMatrix"),viewMatrix:C(r,o,"uViewMatrix"),projectionMatrix:C(r,o,"uProjectionMatrix")}}}(t),I.current=function(r){var t=p(o||(o=Object(f.a)(["\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Attributes\n    attribute vec4 ",";\n    attribute vec3 ",";\n    attribute vec4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    varying lowp vec3 ",";\n    // Program\n    void main(void) {\n      // Apply lighting\n      highp vec3 ambientLightColor = vec3(0.3, 0.3, 0.3);\n      highp vec3 directionalLightColor = vec3(1, 1, 1);\n      highp vec3 directionalLightVector = normalize(vec3(0.85, 0.8, 0.75));\n      highp vec4 transformedNormal = "," * "," * vec4(",", 0);\n      highp float directionalLightIntensity = max(0.0, dot(directionalLightVector, transformedNormal.xyz));\n      "," = ambientLightColor + directionalLightIntensity * directionalLightColor;\n      "," = ",";\n      gl_Position = "," * "," * "," * ",";\n    }\n  "])),"uModelMatrix","uViewMatrix","uProjectionMatrix","aPosition","aNormal","aColor","vColor","vLighting","uViewMatrix","uModelMatrix","aNormal","vLighting","vColor","aColor","uProjectionMatrix","uViewMatrix","uModelMatrix","aPosition"),e=p(a||(a=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    varying lowp vec3 ",";\n    // Program\n    void main(void) {\n      gl_FragColor = "," * vec4(",", 1.0);\n    }\n  "])),"vColor","vLighting","vColor","vLighting"),n=b(r,t,e);return{program:n,attribs:{position:r.getAttribLocation(n,"aPosition"),normal:r.getAttribLocation(n,"aNormal"),color:r.getAttribLocation(n,"aColor")},uniforms:{modelMatrix:C(r,n,"uModelMatrix"),viewMatrix:C(r,n,"uViewMatrix"),projectionMatrix:C(r,n,"uProjectionMatrix")}}}(t);for(var e=0,u=[t.TEXTURE0,t.TEXTURE1,t.TEXTURE2,t.TEXTURE3];e<u.length;e++){var c=u[e];g(t,c,"".concat("/mobius","/texture/hours").concat(c-t.TEXTURE0,".bmp"))}t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clearDepth(1),t.clearColor(0,0,0,1),t.enable(t.CULL_FACE),t.cullFace(t.BACK);var s=requestAnimationFrame((function r(t){l(t/12e3*Math.PI),s=requestAnimationFrame(r)}));return function(){cancelAnimationFrame(s)}}),[]),Object(u.useEffect)((function(){var r,t=null===(r=F.current)||void 0===r?void 0:r.getContext("webgl");if(!t)throw new Error("Failed to get a WebGL context.");if(!y.current||!I.current)throw new Error("Missing shader program!");var o=y.current,a=o.program,n=o.attribs,i=o.uniforms,u=I.current,c=u.program,l=u.attribs,s=u.uniforms,f=v.a.perspective(v.a.create(),Math.PI/5,t.canvas.width/t.canvas.height,.1,100),m=v.a.fromTranslation(v.a.create(),[0,0,-4]);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.uniformMatrix4fv(s.modelMatrix,!1,w),t.uniformMatrix4fv(s.viewMatrix,!1,m),t.uniformMatrix4fv(s.projectionMatrix,!1,f);var h=function(r){for(var t=1.2,e=[],o=[],a=[],n=[],i=0;i<2*Math.PI+.001;i+=Math.PI/36)e.push(t*Math.cos(i),t*Math.sin(i),.1),o.push(Math.cos(i),Math.sin(i),0),a.push(1,.8,.5),e.push(t*Math.cos(i),t*Math.sin(i),-.1),o.push(Math.cos(i),Math.sin(i),0),a.push(1,.8,.5);return n.push({mode:r.TRIANGLE_STRIP,first:0,count:e.length/3}),{topology:n,positionBuffer:A(r,e),normalBuffer:A(r,o),colorBuffer:A(r,a)}}(t),p=h.topology,M=h.positionBuffer,d=h.normalBuffer,g=h.colorBuffer;try{t.useProgram(c),t.cullFace(t.FRONT),x(t,p,l.position,M,l.normal,d,l.color,g)}finally{t.deleteBuffer(g),t.deleteBuffer(d),t.deleteBuffer(g)}t.uniformMatrix4fv(s.modelMatrix,!1,v.a.translate(v.a.create(),w,[0,0,-.2])),t.uniformMatrix4fv(s.viewMatrix,!1,m),t.uniformMatrix4fv(s.projectionMatrix,!1,f);var T=function(r){for(var t=[],e=[0,0,0],o=[.25,.25,.25],a=[0,0,1],n=[0,0],i=0,u=1,c=0;c<2*Math.PI+.001;c+=Math.PI/36,u++){var l=1/6*Math.cos(c),s=1/6*Math.sin(c);e.push(l,s,0),a.push(0,0,1),o.push(o[0],o[1],o[2]),n.push(l/1,s/1)}t.push({mode:r.TRIANGLE_FAN,first:i,count:u-i}),i=u;for(var f=1/6;f<.999;f+=1/6){for(var m=0;m<2*Math.PI+.001;m+=Math.PI/36,u+=2){var h=f*Math.cos(m),v=f*Math.sin(m);e.push(h,v,0),a.push(0,0,1),o.push(o[0],o[1],o[2]),n.push(h/1,v/1);var p=(f+1/6)*Math.cos(m),M=(f+1/6)*Math.sin(m);e.push(p,M,0),a.push(0,0,1),o.push(o[0],o[1],o[2]),n.push(p/1,M/1)}t.push({mode:r.TRIANGLE_STRIP,first:i,count:u-i}),i=u}return{topology:t,positionBuffer:A(r,e),normalBuffer:A(r,a),colorBuffer:A(r,o),textureCoordBuffer:A(r,n)}}(t),b=T.topology,L=T.positionBuffer,C=T.normalBuffer,_=T.colorBuffer;try{t.useProgram(c),t.cullFace(t.BACK),x(t,b,l.position,L,l.normal,C,l.color,_)}finally{t.deleteBuffer(_),t.deleteBuffer(C),t.deleteBuffer(L)}for(var B=[],U=[],O=[],N=[],S=0;S<4;S++){var j=E(t,e,S);B[S]=j.vertexCount,U[S]=j.positions,O[S]=j.colors,N[S]=j.textureCoords}try{t.useProgram(a),t.uniformMatrix4fv(y.current.uniforms.modelMatrix,!1,w),t.uniformMatrix4fv(y.current.uniforms.viewMatrix,!1,m),t.uniformMatrix4fv(y.current.uniforms.projectionMatrix,!1,f);for(var D=0;D<4;D++){t.uniform1i(i.sampler,D),R(t,n.position,U[D],3,t.FLOAT),R(t,n.color,O[D],3,t.FLOAT),R(t,n.textureCoords,N[D],2,t.FLOAT);try{t.cullFace(t.BACK),t.drawArrays(t.TRIANGLE_STRIP,0,B[D])}finally{P(t,n.textureCoords),P(t,n.color),P(t,n.position)}}}finally{[].concat(U,O,N).forEach((function(r){return t.deleteBuffer(r)}))}var X=function(r,e,o,a){var n=function(r,t,e,o){return{vertexCount:4,positions:A(r,[-e,-.2*o,t,+e,-.2*o,t,-e,o,t,+e,o,t]),normals:A(r,[0,0,1,0,0,1,0,0,1,0,0,1]),colors:A(r,[.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75])}}(t,r,e,o),i=n.vertexCount,u=n.positions,h=n.normals,p=n.colors;try{t.useProgram(c),t.uniformMatrix4fv(s.modelMatrix,!1,v.a.rotateZ(v.a.create(),w,-a)),t.uniformMatrix4fv(s.viewMatrix,!1,m),t.uniformMatrix4fv(s.projectionMatrix,!1,f),R(t,l.position,u,3,t.FLOAT),R(t,l.normal,h,3,t.FLOAT),R(t,l.color,p,3,t.FLOAT);try{t.drawArrays(t.TRIANGLE_STRIP,0,i)}finally{P(t,l.color),P(t,l.normal),P(t,l.position)}}finally{t.deleteBuffer(p),t.deleteBuffer(h),t.deleteBuffer(u)}};X(.01,.02,.6,e),X(.02,.02,.8,12*e);var G=function(r,t){for(var e=.05,o=.01,a=Math.sqrt(e*e+o*o),n=e/a,i=o/a,u=[0,0,t+o],c=[0,0,1],l=0;l<2*Math.PI;l+=Math.PI/30)u.push(e*Math.cos(l),e*Math.sin(l),t),c.push(i*Math.cos(l),i*Math.sin(l),n);var s=u.length/3;return{vertexCount:s,positions:A(r,u),normals:A(r,c),colors:A(r,new Array(3*s).fill(.75))}}(t,.03),V=G.vertexCount,Y=G.positions,W=G.normals,k=G.colors;try{t.useProgram(c),t.uniformMatrix4fv(s.modelMatrix,!1,w),t.uniformMatrix4fv(s.viewMatrix,!1,m),t.uniformMatrix4fv(s.projectionMatrix,!1,f),R(t,l.position,Y,3,t.FLOAT),R(t,l.normal,W,3,t.FLOAT),R(t,l.color,k,3,t.FLOAT);try{t.drawArrays(t.TRIANGLE_FAN,0,V)}finally{P(t,l.position),P(t,l.color)}}finally{t.deleteBuffer(k),t.deleteBuffer(Y)}}),[e,w]);return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("canvas",{width:"768px",height:"768px",ref:F,onPointerDown:function(r){var t=r.currentTarget,e=r.pointerId,o=r.clientX,a=r.clientY;t.setPointerCapture(e),d({x:o,y:a})},onPointerMove:function(r){var t=r.clientX,e=r.clientY;if(M){var o=t-M.x,a=e-M.y,n=Math.sqrt(o*o+a*a);if(n>0){var i=v.a.fromRotation(v.a.create(),.01*n,[a,o,0]);_(v.a.mul(v.a.create(),i,w)),d({x:t,y:e})}}},onPointerUp:function(r){var t=r.currentTarget,e=r.pointerId;d(null),t.releasePointerCapture(e)}}),c.a.createElement("p",null,"M\xf6bius Clock")))}function x(r,t,e,o,a,n,i,u){R(r,e,o,3,r.FLOAT),R(r,a,n,3,r.FLOAT),R(r,i,u,3,r.FLOAT);try{var c,l=Object(m.a)(t);try{for(l.s();!(c=l.n()).done;){var s=c.value,f=s.mode,h=s.first,v=s.count;r.drawArrays(f,h,v)}}catch(p){l.e(p)}finally{l.f()}}finally{P(r,i),P(r,a),P(r,e)}}function g(r,t,e){var o=r.createTexture();r.activeTexture(t),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));var a=new Image;return a.onload=function(){r.activeTexture(t),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,a),T(a.width)&&T(a.height)?(r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR))},a.src=e,o}function T(r){return 0===(r&r-1)}function E(r,t,e){var o=function(r,t){for(var e=[],o=[],a=[],n=.1,i=0;i<1.001;i+=.033333){var u=(t+i)*Math.PI,c=1.5*(u-r),l=1+n*Math.cos(c),s=1-n*Math.cos(c);o.push(l*Math.sin(u),l*Math.cos(u),-n*Math.sin(c)),o.push(s*Math.sin(u),s*Math.cos(u),.1*Math.sin(c));for(var f=[0,0,0],m=0;m<3;m++)f[m]=(1-i)*M[t][m]+i*M[(t+1)%M.length][m];a.push.apply(a,f.concat(f)),e.push(i,0,i,1)}return{positions:o,colors:a,textureCoords:e}}(t,e),a=o.positions,n=o.colors,i=o.textureCoords;return{vertexCount:a.length/3,positions:A(r,a),colors:A(r,n),textureCoords:A(r,i)}}function A(r,t){var e=r.createBuffer();if(!e)throw new Error("Failed to create buffer.");return r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),e}function R(r,t,e,o,a){r.bindBuffer(r.ARRAY_BUFFER,e),r.vertexAttribPointer(t,o,a,!1,0,0),r.enableVertexAttribArray(t)}function P(r,t){r.disableVertexAttribArray(t)}function b(r,t,e){var o=r.createProgram();if(!o)throw new Error("Failed to create program.");if(r.attachShader(o,L(r,r.VERTEX_SHADER,t)),r.attachShader(o,L(r,r.FRAGMENT_SHADER,e)),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS)){var a="Unable to initialize the shader program: ".concat(r.getProgramInfoLog(o));throw r.deleteProgram(o),new Error(a)}return o}function L(r,t,e){var o=r.createShader(t);if(!o)throw new Error("Failed to create shader.");if(r.shaderSource(o,e),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var a="An error occurred compiling the shaders: ".concat(r.getShaderInfoLog(o));throw r.deleteShader(o),new Error(a)}return o}function C(r,t,e){return r.getUniformLocation(t,e)||function(r){throw new Error(r)}('No uniform named "'.concat(e,'" was found.'))}e(22);s.a.render(c.a.createElement(d,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.19b250e9.chunk.js.map