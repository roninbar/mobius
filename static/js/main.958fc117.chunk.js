(this.webpackJsonpmobius=this.webpackJsonpmobius||[]).push([[0],{14:function(r,t,e){r.exports=e(21)},19:function(r,t,e){},20:function(r,t,e){},21:function(r,t,e){"use strict";e.r(t);var o,n,a,i,u=e(0),c=e.n(u),s=e(5),l=e.n(s),f=e(2),m=e(3),v=e(1),E=(e(19),function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return r.slice(1).reduce((function(r,t,o){return r+e[o]+t}),r[0])}),T=[[0,0,1],[0,1,0],[1,1,0],[1,0,0]];function x(){var r=Object(u.useState)(0),t=Object(m.a)(r,2),e=t[0],s=t[1],l=Object(u.useState)(),T=Object(m.a)(l,2),x=T[0],M=T[1],P=Object(u.useState)(v.a.create()),_=Object(m.a)(P,2),w=_[0],C=_[1],U=Object(u.useRef)(null),L=Object(u.useRef)(null),F=Object(u.useRef)(null);Object(u.useEffect)((function(){var r,t=null===(r=F.current)||void 0===r?void 0:r.getContext("webgl");if(!t)throw new Error("Failed to get a WebGL context.");U.current=function(r){var t=E(a||(a=Object(f.a)(["\n    // Attributes\n    attribute vec4 ",";\n    attribute vec4 ",";\n    attribute vec2 ",";\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Program\n    void main(void) {\n      gl_Position = "," * "," * "," * ",";\n      "," = ",";\n      "," = ",";\n    }\n  "])),"aPosition","aColor","aTextureCoords","uModelMatrix","uViewMatrix","uProjectionMatrix","vColor","vTextureCoords","uProjectionMatrix","uViewMatrix","uModelMatrix","aPosition","vColor","aColor","vTextureCoords","aTextureCoords"),e=E(i||(i=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Uniforms\n    uniform sampler2D ",";\n    // Program\n    void main(void) {\n      gl_FragColor = "," * texture2D(",", ",");\n    }\n  "])),"vColor","vTextureCoords","uSampler","vColor","uSampler","vTextureCoords"),o=R(r,t,e);return{program:o,attribs:{position:r.getAttribLocation(o,"aPosition"),color:r.getAttribLocation(o,"aColor"),textureCoords:r.getAttribLocation(o,"aTextureCoords")},uniforms:{sampler:b(r,o,"uSampler"),modelMatrix:b(r,o,"uModelMatrix"),viewMatrix:b(r,o,"uViewMatrix"),projectionMatrix:b(r,o,"uProjectionMatrix")}}}(t),L.current=function(r){var t=E(o||(o=Object(f.a)(["\n    // Attributes\n    attribute vec4 ",";\n    attribute vec4 ",";\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    // Program\n    void main(void) {\n      gl_Position = "," * "," * "," * ",";\n      "," = ",";\n    }\n  "])),"aPosition","aColor","uModelMatrix","uViewMatrix","uProjectionMatrix","vColor","uProjectionMatrix","uViewMatrix","uModelMatrix","aPosition","vColor","aColor"),e=E(n||(n=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    // Program\n    void main(void) {\n      gl_FragColor = ",";\n    }\n  "])),"vColor","vColor"),a=R(r,t,e);return{program:a,attribs:{position:r.getAttribLocation(a,"aPosition"),color:r.getAttribLocation(a,"aColor")},uniforms:{modelMatrix:b(r,a,"uModelMatrix"),viewMatrix:b(r,a,"uViewMatrix"),projectionMatrix:b(r,a,"uProjectionMatrix")}}}(t);for(var e=0,u=[t.TEXTURE0,t.TEXTURE1,t.TEXTURE2,t.TEXTURE3];e<u.length;e++){var c=u[e];d(t,c,"".concat("/mobius","/texture/hours").concat(c-t.TEXTURE0,".bmp"))}t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clearDepth(1),t.clearColor(0,0,0,1),t.enable(t.CULL_FACE),t.cullFace(t.BACK);var l=requestAnimationFrame((function r(t){s(t/12e3*Math.PI),l=requestAnimationFrame(r)}));return function(){cancelAnimationFrame(l)}}),[]),Object(u.useEffect)((function(){var r,t=null===(r=F.current)||void 0===r?void 0:r.getContext("webgl");if(!t)throw new Error("Failed to get a WebGL context.");if(!U.current||!L.current)throw new Error("Missing shader program!");var o=U.current,n=o.program,a=o.attribs,i=o.uniforms,u=L.current,c=u.program,s=u.attribs,l=u.uniforms,f=v.a.perspective(v.a.create(),Math.PI/5,t.canvas.width/t.canvas.height,.1,100),m=v.a.fromTranslation(v.a.create(),[0,0,-4]);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);for(var E=[],T=[],x=[],d=[],M=0;M<4;M++){var R=g(t,e,M);E[M]=R.vertexCount,T[M]=R.positions,x[M]=R.colors,d[M]=R.textureCoords}try{t.useProgram(n),t.uniformMatrix4fv(U.current.uniforms.modelMatrix,!1,w),t.uniformMatrix4fv(U.current.uniforms.viewMatrix,!1,m),t.uniformMatrix4fv(U.current.uniforms.projectionMatrix,!1,f);for(var b=0;b<4;b++){t.uniform1i(i.sampler,b),p(t,a.position,T[b],3,t.FLOAT),p(t,a.color,x[b],3,t.FLOAT),p(t,a.textureCoords,d[b],2,t.FLOAT);try{t.drawArrays(t.TRIANGLE_STRIP,0,E[b])}finally{h(t,a.textureCoords),h(t,a.color),h(t,a.position)}}}finally{[].concat(T,x,d).forEach((function(r){return t.deleteBuffer(r)}))}var P=function(r,e,o){var n=function(r,t,e){return{vertexCount:4,positions:A(r,[-t,0,0,+t,0,0,-t,e,0,+t,e,0]),colors:A(r,[.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75])}}(t,r,e),a=n.vertexCount,i=n.positions,u=n.colors;try{t.useProgram(c),t.uniformMatrix4fv(l.modelMatrix,!1,v.a.rotateZ(v.a.create(),w,-o)),t.uniformMatrix4fv(l.viewMatrix,!1,m),t.uniformMatrix4fv(l.projectionMatrix,!1,f),p(t,s.position,i,3,t.FLOAT),p(t,s.color,u,3,t.FLOAT);try{t.drawArrays(t.TRIANGLE_STRIP,0,a)}finally{h(t,s.color),h(t,s.position)}}finally{t.deleteBuffer(u),t.deleteBuffer(i)}};P(.02,.6,e),P(.02,.8,12*e);var _=function(r){for(var t=[0,0,.01],e=0;e<2*Math.PI;e+=Math.PI/30)t.push(.05*Math.cos(e),.05*Math.sin(e),0);var o=t.length/3;return{vertexCount:o,positions:A(r,t),colors:A(r,new Array(3*o).fill(.75))}}(t),C=_.vertexCount,I=_.positions,y=_.colors;try{t.useProgram(c),t.uniformMatrix4fv(l.modelMatrix,!1,w),t.uniformMatrix4fv(l.viewMatrix,!1,m),t.uniformMatrix4fv(l.projectionMatrix,!1,f),p(t,s.position,I,3,t.FLOAT),p(t,s.color,y,3,t.FLOAT);try{t.drawArrays(t.TRIANGLE_FAN,0,C)}finally{h(t,s.position),h(t,s.color)}}finally{t.deleteBuffer(y),t.deleteBuffer(I)}}),[e,w]);return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("canvas",{width:"768px",height:"768px",ref:F,onPointerDown:function(r){var t=r.target,e=r.pointerId,o=r.clientX,n=r.clientY;t instanceof Element&&t.setPointerCapture(e),M({x:o,y:n})},onPointerMove:function(r){var t=r.clientX,e=r.clientY;if(x){var o=t-x.x,n=e-x.y,a=Math.sqrt(o*o+n*n);if(a>0){var i=v.a.fromRotation(v.a.create(),.01*a,[n,o,0]);C(v.a.mul(v.a.create(),i,w)),M({x:t,y:e})}}},onPointerUp:function(r){var t=r.target,e=r.pointerId;M(null),t instanceof Element&&t.releasePointerCapture(e)}}),c.a.createElement("p",null,"M\xf6bius Clock")))}function d(r,t,e){var o=r.createTexture();r.activeTexture(t),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));var n=new Image;return n.onload=function(){r.activeTexture(t),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),M(n.width)&&M(n.height)?(r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR))},n.src=e,o}function M(r){return 0===(r&r-1)}function p(r,t,e,o,n){r.bindBuffer(r.ARRAY_BUFFER,e),r.vertexAttribPointer(t,o,n,!1,0,0),r.enableVertexAttribArray(t)}function h(r,t){r.disableVertexAttribArray(t)}function g(r,t,e){var o=function(r,t){for(var e=[],o=[],n=[],a=.1,i=0;i<1.001;i+=.033333){var u=(t+i)*Math.PI,c=1.5*(u-r),s=1-a*Math.cos(c),l=1+a*Math.cos(c);o.push(s*Math.sin(u),s*Math.cos(u),-a*Math.sin(c)),o.push(l*Math.sin(u),l*Math.cos(u),.1*Math.sin(c));for(var f=[0,0,0],m=0;m<3;m++)f[m]=(1-i)*T[t][m]+i*T[(t+1)%T.length][m];n.push.apply(n,f.concat(f)),e.push(i,0,i,1)}return{positions:o,colors:n,textureCoords:e}}(t,e),n=o.positions,a=o.colors,i=o.textureCoords;return{vertexCount:n.length/3,positions:A(r,n),colors:A(r,a),textureCoords:A(r,i)}}function A(r,t){var e=r.createBuffer();if(!e)throw new Error("Failed to create buffer.");return r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),e}function R(r,t,e){var o=r.createProgram();if(!o)throw new Error("Failed to create program.");if(r.attachShader(o,P(r,r.VERTEX_SHADER,t)),r.attachShader(o,P(r,r.FRAGMENT_SHADER,e)),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS)){var n="Unable to initialize the shader program: ".concat(r.getProgramInfoLog(o));throw r.deleteProgram(o),new Error(n)}return o}function b(r,t,e){return r.getUniformLocation(t,e)||function(r){throw new Error(r)}('No uniform named "'.concat(e,'" was found.'))}function P(r,t,e){var o=r.createShader(t);if(!o)throw new Error("Failed to create shader.");if(r.shaderSource(o,e),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var n="An error occurred compiling the shaders: ".concat(r.getShaderInfoLog(o));throw r.deleteShader(o),new Error(n)}return o}e(20);l.a.render(c.a.createElement(x,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.958fc117.chunk.js.map