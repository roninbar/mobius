(this.webpackJsonpmobius=this.webpackJsonpmobius||[]).push([[0],{14:function(r,e,t){r.exports=t(21)},19:function(r,e,t){},20:function(r,e,t){},21:function(r,e,t){"use strict";t.r(e);var o,n,a=t(0),i=t.n(a),c=t(5),u=t.n(c),s=t(2),E=t(3),l=t(1),T=(t(19),function(r){return Object(E.a)(r,1)[0]}),f=[[0,0,1],[0,1,0],[1,1,0],[1,0,0]];function m(){var r=Object(a.useState)(0),e=Object(E.a)(r,2),t=e[0],c=e[1],u=Object(a.useRef)(null),f=Object(a.useRef)(null);return Object(a.useEffect)((function(){var r,e=null===(r=f.current)||void 0===r?void 0:r.getContext("webgl");if(!e)throw new Error("Failed to get a WebGL context.");u.current=function(r){var e=T(o||(o=Object(s.a)(["\n    // Attributes\n    attribute vec4 aPosition;\n    attribute vec4 aColor;\n    attribute vec2 aTextureCoords;\n    // Uniforms\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n    // Varyings\n    varying lowp vec4 vColor;\n    varying highp vec2 vTextureCoords;\n    // Program\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aPosition;\n      vColor = aColor;\n      vTextureCoords = aTextureCoords;\n    }\n  "]))),t=T(n||(n=Object(s.a)(["\n    // Varyings\n    varying lowp vec4 vColor;\n    varying highp vec2 vTextureCoords;\n    // Uniforms\n    uniform sampler2D uSampler;\n    // Program\n    void main(void) {\n      gl_FragColor = vColor * texture2D(uSampler, vTextureCoords);\n    }\n  "]))),a=r.createProgram();if(!a)throw new Error("Failed to create program.");if(r.attachShader(a,x(r,r.VERTEX_SHADER,e)),r.attachShader(a,x(r,r.FRAGMENT_SHADER,t)),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS)){var i="Unable to initialize the shader program: ".concat(r.getProgramInfoLog(a));throw r.deleteProgram(a),new Error(i)}return{program:a,attribs:{position:r.getAttribLocation(a,"aPosition"),color:r.getAttribLocation(a,"aColor"),textureCoords:r.getAttribLocation(a,"aTextureCoords")},uniforms:{sampler:p(r,a,"uSampler"),modelViewMatrix:p(r,a,"uModelViewMatrix"),projectionMatrix:p(r,a,"uProjectionMatrix")}}}(e),e.useProgram(u.current.program),e.uniformMatrix4fv(u.current.uniforms.modelViewMatrix,!1,function(r){var e=l.a.create();return l.a.translate(e,e,[0,0,-r]),e}(4)),e.uniformMatrix4fv(u.current.uniforms.projectionMatrix,!1,function(r,e,t,o,n){var a=l.a.create();return l.a.perspective(a,t,r/e,o,n),a}(e.canvas.width,e.canvas.height,Math.PI/5,.1,100));for(var t=0,a=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3];t<a.length;t++){var i=a[t];h(e,i,"".concat("/mobius","/texture/hours").concat(i-e.TEXTURE0,".bmp"))}e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clearDepth(1),e.clearColor(0,0,0,1),e.enable(e.CULL_FACE),e.cullFace(e.BACK);var E=requestAnimationFrame((function r(e){c(e/4e3*Math.PI),E=requestAnimationFrame(r)}));return function(){cancelAnimationFrame(E)}}),[]),Object(a.useEffect)((function(){var r,e=null===(r=f.current)||void 0===r?void 0:r.getContext("webgl");if(!e)throw new Error("Failed to get a WebGL context.");if(!u.current)throw new Error("No shader program!");for(var o=u.current,n=o.attribs,a=o.uniforms,i=[],c=[],s=[],E=[],l=0;l<4;l++){var T=g(e,t,l);i[l]=T.vertexCount,c[l]=T.positions,s[l]=T.colors,E[l]=T.textureCoords}try{e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);for(var m=0;m<4;m++)e.uniform1i(a.sampler,m),d(e,62,n.position,c[m],n.color,s[m],n.textureCoords,E[m])}finally{[].concat(c,s,E).forEach((function(r){return e.deleteBuffer(r)}))}}),[t]),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("canvas",{width:"640px",height:"640px",ref:f}),i.a.createElement("p",null,"M\xf6bius Clock")))}function d(r,e,t,o,n,a,i,c){R(r,t,o,3,r.FLOAT),R(r,n,a,3,r.FLOAT),R(r,i,c,2,r.FLOAT),r.drawArrays(r.TRIANGLE_STRIP,0,e)}function h(r,e,t){var o=r.createTexture();r.activeTexture(e),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));var n=new Image;return n.onload=function(){r.activeTexture(e),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),v(n.width)&&v(n.height)?(r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR))},n.src=t,o}function v(r){return 0===(r&r-1)}function R(r,e,t,o,n){r.bindBuffer(r.ARRAY_BUFFER,t),r.vertexAttribPointer(e,o,n,!1,0,0),r.enableVertexAttribArray(e)}function g(r,e,t){var o=function(r,e){for(var t=[],o=[],n=[],a=.1,i=0;i<1.001;i+=.033333){var c=(e+i)*Math.PI,u=1.5*c-r,s=1-a*Math.cos(u),E=1+a*Math.cos(u);o.push(s*Math.sin(c),s*Math.cos(c),-a*Math.sin(u)),o.push(E*Math.sin(c),E*Math.cos(c),.1*Math.sin(u));for(var l=[0,0,0],T=0;T<3;T++)l[T]=(1-i)*f[e][T]+i*f[(e+1)%f.length][T];n.push.apply(n,l.concat(l)),t.push(i,0,i,1)}return{positions:o,colors:n,textureCoords:t}}(e,t),n=o.positions,a=o.colors,i=o.textureCoords;return{vertexCount:n.length/3,positions:A(r,n),colors:A(r,a),textureCoords:A(r,i)}}function A(r,e){var t=r.createBuffer();if(!t)throw new Error("Failed to create buffer.");return r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.STATIC_DRAW),t}function p(r,e,t){return r.getUniformLocation(e,t)||function(r){throw new Error(r)}('No uniform named "'.concat(t,'" was found.'))}function x(r,e,t){var o=r.createShader(e);if(!o)throw new Error("Failed to create shader.");if(r.shaderSource(o,t),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var n="An error occurred compiling the shaders: ".concat(r.getShaderInfoLog(o));throw r.deleteShader(o),new Error(n)}return o}t(20);u.a.render(i.a.createElement(m,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.94d43274.chunk.js.map