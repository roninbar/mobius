(this.webpackJsonpmobius=this.webpackJsonpmobius||[]).push([[0],{17:function(r,e,t){r.exports=t(24)},22:function(r,e,t){},23:function(r,e,t){},24:function(r,e,t){"use strict";t.r(e);var o,n,a=t(0),i=t.n(a),c=t(8),u=t.n(c),l=t(4),s=t(5),f=t(6),d=t(2),v=(t(22),function(r){return Object(f.a)(r,1)[0]}),m=[[0,0,1],[0,1,0],[1,1,0],[1,0,0]];function h(){var r=Object(a.useState)(0),e=Object(f.a)(r,2),t=e[0],c=e[1],u=Object(a.useRef)(null);Object(a.useEffect)((function(){var r,e=null===(r=s.current)||void 0===r?void 0:r.getContext("webgl");if(!e)throw new Error("Failed to get a WebGL context.");u.current=function(r){var e=v(o||(o=Object(l.a)(["\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n    varying lowp vec4 vColor;\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  "]))),t=v(n||(n=Object(l.a)(["\n    varying lowp vec4 vColor;\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "]))),a=r.createProgram();if(!a)throw new Error("Failed to create program.");if(r.attachShader(a,A(r,r.VERTEX_SHADER,e)),r.attachShader(a,A(r,r.FRAGMENT_SHADER,t)),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS)){var i="Unable to initialize the shader program: ".concat(r.getProgramInfoLog(a));throw r.deleteProgram(a),new Error(i)}return{program:a,attribs:{position:r.getAttribLocation(a,"aVertexPosition"),color:r.getAttribLocation(a,"aVertexColor")},uniforms:{modelViewMatrix:E(r,a,"uModelViewMatrix"),projectionMatrix:E(r,a,"uProjectionMatrix")}}}(e),e.useProgram(u.current.program),e.uniformMatrix4fv(u.current.uniforms.modelViewMatrix,!1,function(r){var e=d.a.create();return d.a.translate(e,e,[0,0,-r]),e}(4)),e.uniformMatrix4fv(u.current.uniforms.projectionMatrix,!1,function(r,e,t,o,n){var a=d.a.create();return d.a.perspective(a,t,r/e,o,n),a}(e.canvas.width,e.canvas.height,Math.PI/5,.1,100)),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clearDepth(1),e.clearColor(0,0,0,1),e.enable(e.CULL_FACE);var t=requestAnimationFrame((function r(e){c(e/4e3*Math.PI),t=requestAnimationFrame(r)}));return function(){cancelAnimationFrame(t)}}),[]);var s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var r,e,o,n,a,i=null===(r=s.current)||void 0===r?void 0:r.getContext("webgl");if(!i)throw new Error("Failed to get a WebGL context.");if(!u.current)throw new Error("No program!");var c=g(i,t,0),l=c.positions,f=c.colors,d=c.count,v=g(i,t,2),m=v.positions,h=v.colors,b=v.count;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.cullFace(i.BACK),p(i,u.current.program,null===(e=u.current)||void 0===e?void 0:e.attribs.position,null===(o=u.current)||void 0===o?void 0:o.attribs.color,d/3,l,f),i.cullFace(i.FRONT),p(i,u.current.program,null===(n=u.current)||void 0===n?void 0:n.attribs.position,null===(a=u.current)||void 0===a?void 0:a.attribs.color,b/3,m,h)}),[t]),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("canvas",{width:"480px",height:"480px",ref:s}),i.a.createElement("p",null,"M\xf6bius Clock")))}function p(r,e,t,o,n,a,i){b(r,a,t),b(r,i,o),r.drawArrays(r.TRIANGLE_STRIP,0,n)}function b(r,e,t){r.bindBuffer(r.ARRAY_BUFFER,e),r.vertexAttribPointer(t,3,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t)}function g(r,e,t){var o=function(r,e){for(var t=[],o=[],n=.1,a=0;a<2;a++)for(var i=0;i<1.001;i+=1/30){var c=(a+i)*Math.PI,u=1.5*c-r,l=Math.cos(c),f=Math.sin(c),d=Math.cos(u),v=Math.sin(u),h=1-n*d,p=1+n*d,b=-n*v,g=.1*v;t.push(p*f,p*l,g),t.push(h*f,h*l,b);for(var w=new Array(3).fill(0),E=0;E<3;E++)w[E]=(1-i)*m[e+a][E]+i*m[(e+a+1)%m.length][E];o.push.apply(o,Object(s.a)(w).concat(Object(s.a)(w)))}return{positions:t,colors:o}}(e,t),n=o.positions,a=o.colors;return{positions:w(r,n),colors:w(r,a),count:n.length}}function w(r,e){var t=r.createBuffer();if(!t)throw new Error("Failed to create position buffer.");return r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.STATIC_DRAW),t}function E(r,e,t){return r.getUniformLocation(e,t)||function(r){throw new Error(r)}('No uniform named "'.concat(t,'" was found.'))}function A(r,e,t){var o=r.createShader(e);if(!o)throw new Error("Failed to create shader.");if(r.shaderSource(o,t),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var n="An error occurred compiling the shaders: ".concat(r.getShaderInfoLog(o));throw r.deleteShader(o),new Error(n)}return o}t(23);u.a.render(i.a.createElement(h,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d0d62869.chunk.js.map