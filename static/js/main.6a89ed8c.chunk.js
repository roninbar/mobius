(this.webpackJsonpmobius=this.webpackJsonpmobius||[]).push([[0],{14:function(r,e,t){r.exports=t(21)},19:function(r,e,t){},20:function(r,e,t){},21:function(r,e,t){"use strict";t.r(e);var o,n,a,i,u=t(0),c=t.n(u),s=t(4),l=t.n(s),f=t(2),E=t(5),m=t(1),T=(t(19),function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];return r.slice(1).reduce((function(r,e,o){return r+t[o]+e}),r[0])}),v=[[0,0,1],[0,1,0],[1,1,0],[1,0,0]];function d(){var r=Object(u.useState)(0),e=Object(E.a)(r,2),t=e[0],s=e[1],l=Object(u.useRef)(null),v=Object(u.useRef)(null),d=Object(u.useRef)(null);return Object(u.useEffect)((function(){var r,e=null===(r=d.current)||void 0===r?void 0:r.getContext("webgl");if(!e)throw new Error("Failed to get a WebGL context.");l.current=function(r){var e=T(a||(a=Object(f.a)(["\n    // Attributes\n    attribute vec4 ",";\n    attribute vec4 ",";\n    attribute vec2 ",";\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Program\n    void main(void) {\n      gl_Position = "," * "," * ",";\n      "," = ",";\n      "," = ",";\n    }\n  "])),"aPosition","aColor","aTextureCoords","uModelViewMatrix","uProjectionMatrix","vColor","vTextureCoords","uProjectionMatrix","uModelViewMatrix","aPosition","vColor","aColor","vTextureCoords","aTextureCoords"),t=T(i||(i=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    varying highp vec2 ",";\n    // Uniforms\n    uniform sampler2D ",";\n    // Program\n    void main(void) {\n      gl_FragColor = "," * texture2D(",", ",");\n    }\n  "])),"vColor","vTextureCoords","uSampler","vColor","uSampler","vTextureCoords"),o=R(r,e,t);return{program:o,attribs:{position:r.getAttribLocation(o,"aPosition"),color:r.getAttribLocation(o,"aColor"),textureCoords:r.getAttribLocation(o,"aTextureCoords")},uniforms:{sampler:b(r,o,"uSampler"),modelViewMatrix:b(r,o,"uModelViewMatrix"),projectionMatrix:b(r,o,"uProjectionMatrix")}}}(e),v.current=function(r){var e=T(o||(o=Object(f.a)(["\n    // Attributes\n    attribute vec4 ",";\n    attribute vec4 ",";\n    // Uniforms\n    uniform mat4 ",";\n    uniform mat4 ",";\n    // Varyings\n    varying lowp vec4 ",";\n    // Program\n    void main(void) {\n      gl_Position = "," * "," * ",";\n      "," = ",";\n    }\n  "])),"aPosition","aColor","uModelViewMatrix","uProjectionMatrix","vColor","uProjectionMatrix","uModelViewMatrix","aPosition","vColor","aColor"),t=T(n||(n=Object(f.a)(["\n    // Varyings\n    varying lowp vec4 ",";\n    // Program\n    void main(void) {\n      gl_FragColor = ",";\n    }\n  "])),"vColor","vColor"),a=R(r,e,t);return{program:a,attribs:{position:r.getAttribLocation(a,"aPosition"),color:r.getAttribLocation(a,"aColor")},uniforms:{modelViewMatrix:b(r,a,"uModelViewMatrix"),projectionMatrix:b(r,a,"uProjectionMatrix")}}}(e);for(var t=0,u=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3];t<u.length;t++){var c=u[t];x(e,c,"".concat("/mobius","/texture/hours").concat(c-e.TEXTURE0,".bmp"))}e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clearDepth(1),e.clearColor(0,0,0,1),e.enable(e.CULL_FACE),e.cullFace(e.BACK);var E=requestAnimationFrame((function r(e){s(e/6e4*Math.PI),E=requestAnimationFrame(r)}));return function(){cancelAnimationFrame(E)}}),[]),Object(u.useEffect)((function(){var r,e=null===(r=d.current)||void 0===r?void 0:r.getContext("webgl");if(!e)throw new Error("Failed to get a WebGL context.");if(!l.current||!v.current)throw new Error("Missing shader program!");var o=l.current,n=o.program,a=o.attribs,i=o.uniforms,u=v.current,c=u.program,s=u.attribs,f=u.uniforms,E=m.a.perspective(m.a.create(),Math.PI/5,e.canvas.width/e.canvas.height,.1,100),T=m.a.fromTranslation(m.a.create(),[0,0,-4]);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);for(var x=[],h=[],R=[],b=[],_=0;_<4;_++){var P=A(e,t,_);x[_]=P.vertexCount,h[_]=P.positions,R[_]=P.colors,b[_]=P.textureCoords}try{e.useProgram(n),e.uniformMatrix4fv(l.current.uniforms.modelViewMatrix,!1,T),e.uniformMatrix4fv(l.current.uniforms.projectionMatrix,!1,E);for(var w=0;w<4;w++){e.uniform1i(i.sampler,w),g(e,a.position,h[w],3,e.FLOAT),g(e,a.color,R[w],3,e.FLOAT),g(e,a.textureCoords,b[w],2,e.FLOAT);try{e.drawArrays(e.TRIANGLE_STRIP,0,x[w])}finally{p(e,a.textureCoords),p(e,a.color),p(e,a.position)}}}finally{[].concat(h,R,b).forEach((function(r){return e.deleteBuffer(r)}))}var C=function(r,t,o){var n=function(r,e,t){return{vertexCount:4,positions:M(r,[-e,0,0,+e,0,0,-e,t,0,+e,t,0]),colors:M(r,[.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75,.75])}}(e,r,t),a=n.vertexCount,i=n.positions,u=n.colors;try{e.useProgram(c),e.uniformMatrix4fv(f.modelViewMatrix,!1,m.a.rotateZ(m.a.create(),T,-o)),e.uniformMatrix4fv(f.projectionMatrix,!1,E),g(e,s.position,i,3,e.FLOAT),g(e,s.color,u,3,e.FLOAT);try{e.drawArrays(e.TRIANGLE_STRIP,0,a)}finally{p(e,s.color),p(e,s.position)}}finally{e.deleteBuffer(u),e.deleteBuffer(i)}};C(.02,.6,t),C(.02,.8,60*t);var U=function(r){for(var e=[0,0,.01],t=0;t<2*Math.PI;t+=Math.PI/30)e.push(.05*Math.cos(t),.05*Math.sin(t),0);var o=e.length/3;return{vertexCount:o,positions:M(r,e),colors:M(r,new Array(3*o).fill(.75))}}(e),L=U.vertexCount,F=U.positions,I=U.colors;try{e.useProgram(c),e.uniformMatrix4fv(f.modelViewMatrix,!1,T),e.uniformMatrix4fv(f.projectionMatrix,!1,E),g(e,s.position,F,3,e.FLOAT),g(e,s.color,I,3,e.FLOAT);try{e.drawArrays(e.TRIANGLE_FAN,0,L)}finally{p(e,s.position),p(e,s.color)}}finally{e.deleteBuffer(I),e.deleteBuffer(F)}}),[t]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("canvas",{width:"768px",height:"768px",ref:d}),c.a.createElement("p",null,"M\xf6bius Clock")))}function x(r,e,t){var o=r.createTexture();r.activeTexture(e),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));var n=new Image;return n.onload=function(){r.activeTexture(e),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),h(n.width)&&h(n.height)?(r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR))},n.src=t,o}function h(r){return 0===(r&r-1)}function g(r,e,t,o,n){r.bindBuffer(r.ARRAY_BUFFER,t),r.vertexAttribPointer(e,o,n,!1,0,0),r.enableVertexAttribArray(e)}function p(r,e){r.disableVertexAttribArray(e)}function A(r,e,t){var o=function(r,e){for(var t=[],o=[],n=[],a=.1,i=0;i<1.001;i+=.033333){var u=(e+i)*Math.PI,c=1.5*(u-r),s=1-a*Math.cos(c),l=1+a*Math.cos(c);o.push(s*Math.sin(u),s*Math.cos(u),-a*Math.sin(c)),o.push(l*Math.sin(u),l*Math.cos(u),.1*Math.sin(c));for(var f=[0,0,0],E=0;E<3;E++)f[E]=(1-i)*v[e][E]+i*v[(e+1)%v.length][E];n.push.apply(n,f.concat(f)),t.push(i,0,i,1)}return{positions:o,colors:n,textureCoords:t}}(e,t),n=o.positions,a=o.colors,i=o.textureCoords;return{vertexCount:n.length/3,positions:M(r,n),colors:M(r,a),textureCoords:M(r,i)}}function M(r,e){var t=r.createBuffer();if(!t)throw new Error("Failed to create buffer.");return r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.STATIC_DRAW),t}function R(r,e,t){var o=r.createProgram();if(!o)throw new Error("Failed to create program.");if(r.attachShader(o,_(r,r.VERTEX_SHADER,e)),r.attachShader(o,_(r,r.FRAGMENT_SHADER,t)),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS)){var n="Unable to initialize the shader program: ".concat(r.getProgramInfoLog(o));throw r.deleteProgram(o),new Error(n)}return o}function b(r,e,t){return r.getUniformLocation(e,t)||function(r){throw new Error(r)}('No uniform named "'.concat(t,'" was found.'))}function _(r,e,t){var o=r.createShader(e);if(!o)throw new Error("Failed to create shader.");if(r.shaderSource(o,t),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var n="An error occurred compiling the shaders: ".concat(r.getShaderInfoLog(o));throw r.deleteShader(o),new Error(n)}return o}t(20);l.a.render(c.a.createElement(d,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.6a89ed8c.chunk.js.map